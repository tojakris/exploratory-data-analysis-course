plot(x, y, col = kmeansObj$cluster, pch = 19, cex = 2)
points(kmeansObj$centers, col = 1:3, pch = 3, cex = 3, lwd = 3)
## K-means clustering - example
set.seed(1234)
par(mar = c(0, 0, 0, 0))
x <- rnorm(12, mean = rep(1:3, each = 4), sd = 0.2)
y <- rnorm(12, mean = rep(c(1, 2, 1), each = 4), sd = 0.2)
plot(x, y, col = "blue", pch = 19, cex = 2)
text(x + 0.05, y + 0.05, labels = as.character(1:12))
## kmeans()
#   Important parameters: x, centers, iter.max, nstart
dataFrame <- data.frame(x, y)
kmeansObj <- kmeans(dataFrame, centers = 3)
names(kmeansObj)
kmeansObj$cluster
par(mar = rep(0.2, 4))
plot(x, y, col = kmeansObj$cluster, pch = 19, cex = 2)
points(kmeansObj$centers, col = 1:3, pch = 3, cex = 3, lwd = 3)
set.seed(1234)
dataMatrix <- as.matrix(dataFrame)[sample(1:12), ]
kmeansObj2 <- kmeans(dataMatrix, centers = 3)
par(mfrow = c(1, 2), mar = c(2, 4, 0.1, 0.1))
image(t(dataMatrix)[, nrow(dataMatrix):1], yaxt = "n")
image(t(dataMatrix)[, order(kmeansObj$cluster)], yaxt = "n")
print("This will likely take a few seconds. Be patient!")
NEI <- readRDS("./exdata-data-NEI_data/summarySCC_PM25.rds")
SCC <- readRDS("./exdata-data-NEI_data/Source_Classification_Code.rds")
setwd("/Users/silvia/Estudiar/Data Science/Courses/Coursera - 04 Exploratory Data Analysis/exploratory-data-analysis-course/CourseProject2")
print("This will likely take a few seconds. Be patient!")
NEI <- readRDS("./exdata-data-NEI_data/summarySCC_PM25.rds")
SCC <- readRDS("./exdata-data-NEI_data/Source_Classification_Code.rds")
head(SCC)
baltimore.data <- NEI[NEI$fips == "24510"]
baltimore.data <- NEI[NEI$fips == "24510",]
################################################################################
# Have total emissions from PM2.5 decreased in the Baltimore City, Maryland
# (fips == "24510") from 1999 to 2008?
# Use the base plotting system to make a plot answering this question.
################################################################################
# Load the data
print("This will likely take a few seconds. Be patient!")
NEI <- readRDS("./exdata-data-NEI_data/summarySCC_PM25.rds")
SCC <- readRDS("./exdata-data-NEI_data/Source_Classification_Code.rds")
# Subsetting data. Get Baltimore City, Maryland (fips == "24510")
baltimore.data <- NEI[NEI$fips == "24510",]
library(plyr)
# Create the data for the plot
total.emissions <- ddply(baltimore.data,
.(as.character(year)), # convert number to character
summarize,
total=sum(Emissions)/1000000) # sum to million tons
# Give column names
colnames <- c("year","million.tons")
colnames(total.emissions) <- colnames
# Create the plot
par(ps=12, mar=c(5.1,5.1,4.1,2.1))
barplot(total.emissions$million.tons,
col="cadetblue4",
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab=expression("Amount of PM"[2.5]*" emitted, in million tons"),
names.arg=total.emissions$year)
# Making png file
dev.copy(png, file = "plot2.png")
dev.off()  ## Don't forget to close the PNG device!
library(plyr)
# Create the data for the plot
total.emissions <- ddply(baltimore.data,
.(as.character(year)), # convert number to character
summarize,
total=sum(Emissions)) # sum to million tons
# Give column names
colnames <- c("year","million.tons")
colnames(total.emissions) <- colnames
# Create the plot
par(ps=12, mar=c(5.1,5.1,4.1,2.1))
barplot(total.emissions$million.tons,
col="cadetblue4",
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab=expression("Amount of PM"[2.5]*" emitted, in million tons"),
names.arg=total.emissions$year)
# Making png file
dev.copy(png, file = "plot2.png")
dev.off()  ## Don't forget to close the PNG device!
colors()
barplot(total.emissions$million.tons,
col="gold",
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab=expression("Amount of PM"[2.5]*" emitted, in tons"),
names.arg=total.emissions$year)
barplot(total.emissions$million.tons,
col="gold1",
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab=expression("Amount of PM"[2.5]*" emitted, in tons"),
names.arg=total.emissions$year)
barplot(total.emissions$million.tons,
col="gold2",
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab=expression("Amount of PM"[2.5]*" emitted, in tons"),
names.arg=total.emissions$year)
barplot(total.emissions$million.tons,
col="gold3",
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab=expression("Amount of PM"[2.5]*" emitted, in tons"),
names.arg=total.emissions$year)
barplot(total.emissions$million.tons,
col="gold4",
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab=expression("Amount of PM"[2.5]*" emitted, in tons"),
names.arg=total.emissions$year)
barplot(total.emissions$million.tons,
col="gold2",
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab=expression("Amount of PM"[2.5]*" emitted, in tons"),
names.arg=total.emissions$year)
source("plot2.R")
?barplot
# Load the data
print("This will likely take a few seconds. Be patient!")
NEI <- readRDS("./exdata-data-NEI_data/summarySCC_PM25.rds")
SCC <- readRDS("./exdata-data-NEI_data/Source_Classification_Code.rds")
# Subsetting data. Get Baltimore City, Maryland (fips == "24510")
baltimore.data <- NEI[NEI$fips == "24510",]
# Create the data for the plot
total.emissions <- ddply(baltimore.data,
.(as.character(year), type), # convert number to character
summarize,
total=sum(Emissions)) # sum to million tons
View(total.emissions)
source("plot2.R")
# Subsetting data. Get Baltimore City, Maryland (fips == "24510")
baltimore.data <- NEI[NEI$fips == "24510",]
# Create the data for the plot
total.emissions <- ddply(baltimore.data,
.(as.character(year), type), # convert number to character
summarize,
total=sum(Emissions)) # sum to million tons
colnames <- c("year","type", "tons")
colnames(total.emissions) <- colnames
qplot(year, data = total.emissions, fill = type)
library(ggplot2)
qplot(year, data = total.emissions, fill = type)
ggplot(total.emissions, aes(tons, fill = type)) +
geom_histogram(binwidth = 1) +
facet_grid(type ~ ., margins = TRUE, scales = "free")
qplot(year, data = total.emissions, facets = type ~ ., binwidth = 2)
View(total.emissions)
total.emissions <- ddply(baltimore.data,
.(as.factor(year), as.factor(type), # convert number to character
summarize,
total=sum(Emissions)) # sum to million tons
# Give column names
colnames <- c("year","type", "tons")
colnames(total.emissions) <- colnames
# Create the plot
library(ggplot2)
qplot(year, data = total.emissions, facets = type ~ ., binwidth = 2)
qplot(year, data = total.emissions, facets = type ~ ., geom="sum" binwidth = 2)
qplot(year, data = total.emissions, facets = type ~ ., geom="bar" binwidth = 2)
qplot(year, data = total.emissions, facets = type ~ ., geom="bar", binwidth = 2)
qplot(year, data = total.emissions, facets = type ~ ., geom="sum", binwidth = 2)
qplot(year,
data = total.emissions,
facets = type ~ .,
geom="bar",
weight=tons,
ylab = "tons"
binwidth = 2)
qplot(year,
data = total.emissions,
facets = type ~ .,
geom="bar",
weight=tons,
ylab = "tons",
binwidth = 2)
qplot(year,
data = total.emissions,
facets = type ~ .,
geom="bar",
weight=tons,
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"))
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"))
m <- ggplot(total.emissions, aes(x = year))
m + geom_histogram(colour = "darkgreen", fill = "white")
m <- ggplot(total.emissions, aes(x = year, y = tons))
m + geom_histogram(colour = "darkgreen", fill = "white")
?geom_bar
m <- ggplot(total.emissions, aes(x = year))
m + geom_histogram(colour = "darkgreen", fill = "white")
m + facet_wrap(~ type)
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"))
?qplot
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
color = type)
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fillcolor = type)
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = year)
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = year)
source("plot3.R")
source("plot3.R")
source("plot3.R")
?qplot
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
png(filename = "plot3.png") ## Create my plots in a PNG file
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
dev.off()
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type,
legend.position="top")
p <- ggplot(total.emissions, aes(year, tons))
summary(p)
p <- ggplot(total.emissions, aes(year, tons))
p + geom_bar()
p + geom_histogram()
ggplot(total.emissions, aes(x = year, y = tons)) + geom_bar(stat = "identity")
ggplot(total.emissions, aes(x = year, y = tons)) + geom_bar(stat = "identity") +
facet_wrap(~ type)
ggplot(total.emissions, aes(x = year, y = tons, fill = type)) + geom_bar(stat = "identity") +
facet_wrap(~ type)
ggplot(total.emissions, aes(x = year, y = tons, fill = type, legend.position="top")) + geom_bar(stat = "identity") +
facet_wrap(~ type)
source("plot3.R")
source("plot3.R")
png(filename = "plot3.png", width = 640, height = 480) ## Create my plots in a PNG file
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type,
legend.position="top")
## Don't forget to close the PNG device!
dev.off()
png(filename = "plot3.png", width = 640, height = 480) ## Create my plots in a PNG file
par(ps=12, mar=c(5.1,5.1,4.1,2.1))
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
## Don't forget to close the PNG device!
dev.off()
source("plot3.R")
source("plot3.R")
?ggsave
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
ggsave(file="plot3.png", scale = 0.5)
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
ggsave(file="plot3.png", width=5.6, height=2.38)
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
ggsave(file="plot3.png")
?qplot
qplot(year,
data = total.emissions,
facets = . ~ type,
margins=TRUE,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
3362/4
1425/4
1425/480
3362/3
qplot(year,
weight = tons,
data = total.emissions,
facets = . ~ type,
margins=TRUE,
geom="bar",
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
ylim = c(0,2500),
fill = type)
qplot(year,
data = total.emissions,
facets = . ~ type,
margins=TRUE,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
library(ggplot2)
png(filename = "plot3.png", width = 807, height = 342) ## Create my plots in a PNG file
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
dev.off()  ## Don't forget to close the PNG device!
source("plot3.R")
setwd("/Users/silvia/Estudiar/Data Science/Courses/Coursera - 04 Exploratory Data Analysis/exploratory-data-analysis-course/CourseProject2")
source("plot3.R")
source("plot3.R")
dev.off()
?png
?dev.copy
source("plot3.R")
?par
par("din")
par("din") / 3
par(din=c(3.736111,1.583333))
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
dev.copy(png, file = "plot3.png")
dev.off()  ## Don't forget to close the PNG device!
par(din=c(3.736111,1.583333))
png(filename = "plot3.png", width = 807, height = 342) ## Create my plots in a PNG file
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
#dev.copy(png, file = "plot3.png")
dev.off()  ## Don't forget to close the PNG device!
source("plot3.R")
source("plot3.R")
source("plot3.R")
par(mar=c(5.1,5.1,4.1,2.1))
png(filename = "plot3.png", width = 807, height = 342) ## Create my plots in a PNG file
qplot(year,
data = total.emissions,
facets = . ~ type,
geom="bar",
weight=tons,
main=expression("Total emissions from PM"[2.5]*
" in the Baltimore City, Maryland"),
xlab="Years",
ylab = expression("Amount of PM"[2.5]*" emitted, in tons"),
fill = type)
#dev.copy(png, file = "plot3.png")
dev.off()  ## Don't forget to close the PNG device!
dev.off()
dev.off()
